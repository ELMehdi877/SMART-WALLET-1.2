<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget & R√©currence - Smart Wallet</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Plus Jakarta Sans', 'sans-serif'], heading: ['Outfit', 'sans-serif'] },
                    colors: {
                        dark: { 900: '#020617', 800: '#0F172A', card: 'rgba(20, 20, 30, 0.6)' },
                        gold: { 400: '#FACC15', 500: '#EAB308', glow: 'rgba(250, 204, 21, 0.2)' }
                    },
                    animation: {
                        'entry': 'entry 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards',
                        'pulse-border': 'pulseBorder 2s infinite',
                        'load-bar': 'loadBar 1.5s ease-out forwards',
                    },
                    keyframes: {
                        entry: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        pulseBorder: {
                            '0%, 100%': { borderColor: 'rgba(239, 68, 68, 0.3)', boxShadow: '0 0 0 rgba(239, 68, 68, 0)' },
                            '50%': { borderColor: 'rgba(239, 68, 68, 1)', boxShadow: '0 0 20px rgba(239, 68, 68, 0.2)' },
                        },
                        loadBar: {
                            '0%': { width: '0%' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #020617;
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(250, 204, 21, 0.05) 0%, transparent 25%), 
                radial-gradient(circle at 85% 30%, rgba(16, 185, 129, 0.05) 0%, transparent 25%);
            color: white;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.5);
        }

        /* Checkbox Switch (iOS Style) */
        .toggle-checkbox:checked {
            right: 0;
            border-color: #FACC15;
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: #FACC15;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #020617; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
    </style>
</head>
<body class="h-screen flex flex-col md:flex-row overflow-hidden">

    <!-- SIDEBAR (Placeholder Design) -->
    <aside class="w-full md:w-24 bg-dark-800 border-r border-white/5 flex md:flex-col items-center py-4 md:py-8 justify-between md:justify-start z-50">
        <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-gold-400 to-amber-600 flex items-center justify-center shadow-lg shadow-gold-500/20 md:mb-12">
            <i class="fa-solid fa-wallet text-black text-xl"></i>
        </div>
        <div class="flex md:flex-col gap-8 text-slate-500 px-6 md:px-0">
            <i class="fa-solid fa-chart-pie text-xl hover:text-white cursor-pointer transition"></i>
            <i class="fa-solid fa-credit-card text-xl hover:text-white cursor-pointer transition"></i>
            <i class="fa-solid fa-sliders text-xl text-gold-400 cursor-pointer drop-shadow-[0_0_10px_rgba(250,204,21,0.5)]"></i>
        </div>
        <div class="w-10 h-10 rounded-full bg-slate-700 md:mt-auto hidden md:block"></div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="flex-1 overflow-y-auto p-6 lg:p-10 relative">
        
        <!-- HEADER -->
        <header class="flex flex-col md:flex-row justify-between items-start md:items-end mb-10 gap-4 animate-entry">
            <div>
                <h1 class="text-3xl lg:text-4xl font-heading font-bold text-white mb-2">
                    Gestion <span class="text-transparent bg-clip-text bg-gradient-to-r from-gold-400 to-amber-300">Budg√©taire</span>
                </h1>
                <p class="text-slate-400 text-sm">D√©finissez vos limites et automatisez vos d√©penses r√©currentes.</p>
            </div>
            
            <!-- Toast Notification (Hidden by default) -->
            <div id="toast" class="hidden px-4 py-3 rounded-xl bg-red-500/10 border border-red-500/50 text-red-400 flex items-center gap-3 animate-bounce">
                <i class="fa-solid fa-circle-exclamation"></i>
                <span class="text-sm font-bold">Transaction Bloqu√©e : Limite atteinte !</span>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">

            <!-- GAUCHE : FORMULAIRE TRANSACTION (4 colonnes) -->
            <div class="lg:col-span-4 glass-panel rounded-3xl p-8 h-fit animate-entry sticky top-10">
                <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-3">
                    <span class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-gold-400"><i class="fa-solid fa-bolt"></i></span>
                    Op√©ration
                </h2>

                <form id="transactionForm" class="space-y-6" onsubmit="return simulateSubmit(event)">
                    
                    <!-- TYPE SWITCHER -->
                    <div class="bg-dark-900 p-1.5 rounded-xl flex relative">
                        <div id="switch-bg" class="absolute left-1.5 top-1.5 bottom-1.5 w-[calc(50%-6px)] bg-red-500 rounded-lg transition-all duration-300"></div>
                        <button type="button" onclick="setType('expense')" class="flex-1 py-2.5 text-sm font-bold relative z-10 text-white transition-colors text-center">
                            D√©pense
                        </button>
                        <button type="button" onclick="setType('income')" class="flex-1 py-2.5 text-sm font-bold relative z-10 text-slate-400 hover:text-white transition-colors text-center">
                            Revenu
                        </button>
                    </div>

                    <!-- CATEGORY -->
                    <div class="group">
                        <label class="text-xs text-slate-400 uppercase font-bold ml-1 mb-1 block">Cat√©gorie</label>
                        <div class="relative">
                            <select id="categorySelect" class="w-full bg-white/5 border border-white/10 rounded-xl p-4 text-white outline-none focus:border-gold-400 appearance-none cursor-pointer transition hover:bg-white/10">
                                <option value="Nourriture">üçî Nourriture</option>
                                <option value="Transport">üöó Transport</option>
                                <option value="Loyer">üè† Loyer</option>
                                <option value="Shopping">üõçÔ∏è Shopping (Bloqu√©)</option>
                            </select>
                            <i class="fa-solid fa-chevron-down absolute right-4 top-4 text-slate-500 pointer-events-none"></i>
                        </div>
                    </div>

                    <!-- AMOUNT -->
                    <div class="group">
                        <label class="text-xs text-slate-400 uppercase font-bold ml-1 mb-1 block">Montant</label>
                        <div class="relative">
                            <input type="number" id="amountInput" placeholder="0.00" class="w-full bg-white/5 border border-white/10 rounded-xl p-4 pl-12 text-white font-mono text-xl outline-none focus:border-gold-400 transition">
                            <span class="absolute left-4 top-4.5 text-slate-500 font-bold">DH</span>
                        </div>
                    </div>

                    <!-- RECURRENCE TOGGLE -->
                    <div class="flex items-center justify-between p-4 rounded-xl border border-white/5 bg-white/5">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-gold-500/20 text-gold-400 flex items-center justify-center text-sm">
                                <i class="fa-solid fa-rotate"></i>
                            </div>
                            <div>
                                <p class="text-sm font-bold text-white">R√©current</p>
                                <p class="text-[10px] text-slate-400">R√©p√©ter chaque mois</p>
                            </div>
                        </div>
                        <!-- Switch Component -->
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" class="sr-only peer">
                            <div class="w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gold-500"></div>
                        </label>
                    </div>

                    <button type="submit" id="submitBtn" class="w-full py-4 rounded-xl bg-white text-black font-bold text-sm uppercase tracking-wider hover:bg-gold-400 hover:shadow-[0_0_20px_rgba(250,204,21,0.4)] transition transform hover:-translate-y-1">
                        Valider la d√©pense
                    </button>
                </form>
            </div>

            <!-- DROITE : VISUALISATION (8 colonnes) -->
            <div class="lg:col-span-8 space-y-8 animate-entry" style="animation-delay: 0.2s">
                
                <!-- 1. Jauges de Budget -->
                <section>
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-bold text-white">√âtat des Budgets</h3>
                        <button onclick="document.getElementById('limitModal').classList.remove('hidden')" class="text-xs text-gold-400 border border-gold-400/30 px-3 py-1.5 rounded-lg hover:bg-gold-400 hover:text-black transition">
                            <i class="fa-solid fa-gear mr-1"></i> Configurer
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        
                        <!-- CARD 1: SAFE (Vert) -->
                        <div class="bg-dark-900/50 p-5 rounded-2xl border border-white/5 relative overflow-hidden group">
                            <div class="flex justify-between mb-2 relative z-10">
                                <div class="flex items-center gap-2">
                                    <i class="fa-solid fa-burger text-emerald-400"></i>
                                    <span class="font-bold text-sm text-white">Nourriture</span>
                                </div>
                                <span class="text-xs font-mono text-emerald-400">850 / 2000 DH</span>
                            </div>
                            <div class="w-full h-2 bg-black rounded-full overflow-hidden relative z-10">
                                <div class="h-full rounded-full bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.5)] animate-load-bar" style="width: 42%"></div>
                            </div>
                            <div class="mt-2 text-right"><span class="text-[10px] text-slate-500">42% Utilis√©</span></div>
                        </div>

                        <!-- CARD 2: WARNING (Orange - 80%) -->
                        <div class="bg-dark-900/50 p-5 rounded-2xl border border-orange-500/30 relative overflow-hidden group">
                            <div class="flex justify-between mb-2 relative z-10">
                                <div class="flex items-center gap-2">
                                    <i class="fa-solid fa-gas-pump text-orange-400"></i>
                                    <span class="font-bold text-sm text-white">Transport</span>
                                </div>
                                <span class="text-xs font-mono text-orange-400">720 / 800 DH</span>
                            </div>
                            <div class="w-full h-2 bg-black rounded-full overflow-hidden relative z-10">
                                <div class="h-full rounded-full bg-orange-500 shadow-[0_0_10px_rgba(249,115,22,0.5)] animate-load-bar" style="width: 90%"></div>
                            </div>
                            <div class="mt-2 flex justify-between">
                                <span class="text-[10px] text-orange-400"><i class="fa-solid fa-envelope"></i> Email envoy√© (80%)</span>
                                <span class="text-[10px] text-slate-500">90% Utilis√©</span>
                            </div>
                        </div>

                        <!-- CARD 3: BLOCKED (Rouge - 100%+) -->
                        <div class="bg-dark-900/50 p-5 rounded-2xl border border-red-500 animate-pulse-border relative overflow-hidden group">
                            <div class="absolute inset-0 bg-red-500/5"></div>
                            <div class="flex justify-between mb-2 relative z-10">
                                <div class="flex items-center gap-2">
                                    <i class="fa-solid fa-bag-shopping text-red-500"></i>
                                    <span class="font-bold text-sm text-white">Shopping</span>
                                </div>
                                <span class="text-xs font-mono text-red-500 font-bold">1500 / 1500 DH</span>
                            </div>
                            <div class="w-full h-2 bg-black rounded-full overflow-hidden relative z-10">
                                <div class="h-full rounded-full bg-red-600 shadow-[0_0_15px_rgba(220,38,38,0.8)] w-full"></div>
                            </div>
                            <div class="mt-2 flex justify-between items-center relative z-10">
                                <span class="text-[10px] text-red-400 font-bold uppercase tracking-wider flex items-center gap-1">
                                    <i class="fa-solid fa-lock"></i> Bloqu√©
                                </span>
                                <span class="text-[10px] text-slate-500">100% Utilis√©</span>
                            </div>
                        </div>

                    </div>
                </section>

                <!-- 2. Tableau R√©currents (Auto-Generated) -->
                <section class="glass-panel rounded-3xl p-8">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-white flex items-center gap-2">
                            <i class="fa-solid fa-robot text-gold-400"></i> Transactions Automatiques
                        </h3>
                        <span class="text-[10px] text-slate-400 uppercase border border-white/10 px-2 py-1 rounded">G√©n√©r√© le 1er du mois</span>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm text-slate-400">
                            <thead class="text-xs uppercase border-b border-white/10 text-gold-400">
                                <tr>
                                    <th class="pb-3 pl-2">Nom</th>
                                    <th class="pb-3">Type</th>
                                    <th class="pb-3">Montant</th>
                                    <th class="pb-3 text-right pr-2">Statut</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-white/5">
                                <tr class="group hover:bg-white/5 transition">
                                    <td class="py-4 pl-2 font-medium text-white">Loyer Appartement</td>
                                    <td class="py-4"><span class="bg-red-500/10 text-red-400 px-2 py-1 rounded text-xs border border-red-500/20">D√©pense</span></td>
                                    <td class="py-4 font-mono">4,500.00 DH</td>
                                    <td class="py-4 text-right pr-2"><i class="fa-solid fa-check-circle text-emerald-500"></i></td>
                                </tr>
                                <tr class="group hover:bg-white/5 transition">
                                    <td class="py-4 pl-2 font-medium text-white">Salaire Mensuel</td>
                                    <td class="py-4"><span class="bg-emerald-500/10 text-emerald-400 px-2 py-1 rounded text-xs border border-emerald-500/20">Revenu</span></td>
                                    <td class="py-4 font-mono">15,000.00 DH</td>
                                    <td class="py-4 text-right pr-2"><i class="fa-solid fa-check-circle text-emerald-500"></i></td>
                                </tr>
                                <tr class="group hover:bg-white/5 transition">
                                    <td class="py-4 pl-2 font-medium text-white">Abonnement Netflix</td>
                                    <td class="py-4"><span class="bg-red-500/10 text-red-400 px-2 py-1 rounded text-xs border border-red-500/20">D√©pense</span></td>
                                    <td class="py-4 font-mono">65.00 DH</td>
                                    <td class="py-4 text-right pr-2"><i class="fa-solid fa-check-circle text-emerald-500"></i></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

            </div>
        </div>
    </main>

    <!-- MODAL : D√âFINIR LIMITE -->
    <div id="limitModal" class="hidden fixed inset-0 z-[60] flex items-center justify-center bg-black/90 backdrop-blur-sm transition-opacity">
        <div class="glass-panel w-full max-w-md rounded-2xl p-8 relative scale-95 transition-transform" id="limitContent">
            <button onclick="document.getElementById('limitModal').classList.add('hidden')" class="absolute top-4 right-4 text-slate-400 hover:text-white"><i class="fa-solid fa-xmark"></i></button>
            
            <h3 class="text-xl font-bold text-white mb-6">D√©finir un Plafond</h3>
            
            <form class="space-y-6">
                <div>
                    <label class="text-xs text-slate-400 uppercase">Cat√©gorie</label>
                    <select class="w-full bg-dark-900 border border-white/10 rounded-xl p-3 mt-1 text-white outline-none">
                        <option>Nourriture</option>
                        <option>Transport</option>
                        <option>Shopping</option>
                    </select>
                </div>
                
                <div>
                    <label class="text-xs text-slate-400 uppercase">Limite (DH)</label>
                    <input type="range" min="100" max="5000" step="100" value="1500" class="w-full accent-gold-400 mt-2" oninput="document.getElementById('rangeVal').innerText = this.value">
                    <div class="text-center font-mono text-2xl font-bold text-gold-400 mt-2"><span id="rangeVal">1500</span> DH</div>
                </div>

                <div class="bg-red-500/10 p-3 rounded-lg border border-red-500/20 flex gap-3">
                    <i class="fa-solid fa-lock text-red-400 mt-1"></i>
                    <p class="text-xs text-red-300">Si ce montant est d√©pass√©, toute nouvelle d√©pense sera bloqu√©e automatiquement.</p>
                </div>

                <button type="button" onclick="document.getElementById('limitModal').classList.add('hidden')" class="w-full py-3 rounded-xl bg-gold-500 text-black font-bold hover:bg-gold-400 transition">Sauvegarder</button>
            </form>
        </div>
    </div>

    <!-- SCRIPT INTERACTIONS (Frontend Simulation) -->
    <script>
        // 1. SWITCH EXPENSE / INCOME
        function setType(type) {
            const bg = document.getElementById('switch-bg');
            const btnSubmit = document.getElementById('submitBtn');
            
            if (type === 'expense') {
                bg.style.transform = 'translateX(0)';
                bg.classList.remove('bg-emerald-500');
                bg.classList.add('bg-red-500');
                btnSubmit.classList.remove('hover:bg-emerald-400');
                btnSubmit.classList.add('hover:bg-gold-400');
                btnSubmit.innerText = "Valider la d√©pense";
            } else {
                bg.style.transform = 'translateX(100%)';
                bg.classList.remove('bg-red-500');
                bg.classList.add('bg-emerald-500');
                btnSubmit.classList.remove('hover:bg-gold-400');
                btnSubmit.classList.add('hover:bg-emerald-400');
                btnSubmit.innerText = "Valider le revenu";
            }
        }

        // 2. SIMULATE SUBMIT & BLOCKING
        function simulateSubmit(e) {
            e.preventDefault();
            const category = document.getElementById('categorySelect').value;
            const amount = document.getElementById('amountInput').value;

            // Simuler un blocage si c'est "Shopping"
            if (category === 'Shopping') {
                const toast = document.getElementById('toast');
                toast.classList.remove('hidden');
                
                // Animation Shake sur le formulaire
                const form = document.getElementById('transactionForm');
                form.classList.add('animate-[shake_0.5s_ease-in-out]');
                setTimeout(() => form.classList.remove('animate-[shake_0.5s_ease-in-out]'), 500);
                
                // Cacher toast apr√®s 3s
                setTimeout(() => toast.classList.add('hidden'), 3000);
                return false;
            }

            alert("Transaction ajout√©e ! (Simulation)");
            return false;
        }
    </script>
</body>
</html>