<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Smart Wallet Elite</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Plus Jakarta Sans', 'sans-serif'],
                        mono: ['Space Grotesk', 'monospace'],
                    },
                    colors: {
                        gold: {
                            300: '#FDE047',
                            400: '#FACC15',
                            500: '#EAB308',
                            600: '#CA8A04',
                        },
                        dark: {
                            900: '#020617',
                            800: '#0F172A',
                            700: '#1e293b',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 1s ease-out forwards',
                        'slide-up': 'slideUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards',
                        'pulse-glow': 'pulseGlow 4s infinite',
                        'dash': 'dash 1.5s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(30px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        pulseGlow: {
                            '0%, 100%': { opacity: '0.5' },
                            '50%': { opacity: '1' },
                        },
                        dash: {
                            '0%': { strokeDasharray: '0, 1000' }, 
                            // La valeur finale est gérée par JS, mais l'anim lance le mouvement
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #020617;
            /* Fond texturé subtil */
            background-image: radial-gradient(circle at 15% 50%, rgba(250, 204, 21, 0.03) 0%, transparent 25%), 
                              radial-gradient(circle at 85% 30%, rgba(16, 185, 129, 0.03) 0%, transparent 25%);
        }

        /* --- GLASSMORPHISM --- */
        .glass-card {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            background: rgba(15, 23, 42, 0.8);
            border-color: rgba(250, 204, 21, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
        }

        /* --- TEXTE GOLD --- */
        .text-gradient-gold {
            background: linear-gradient(to right, #FDE047, #EAB308, #FFF, #EAB308);
            background-size: 200% auto;
            color: transparent;
            -webkit-background-clip: text;
            background-clip: text;
            animation: textShimmer 5s linear infinite;
        }
        @keyframes textShimmer { 0% { background-position: 200% center; } 100% { background-position: -200% center; } }

        /* --- SCROLLBAR --- */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #020617; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #FACC15; }

        /* --- CHART STYLES --- */
        .chart-circle {
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
            transition: stroke-dasharray 1s ease-out, stroke-width 0.3s;
            cursor: pointer;
        }
        .chart-circle:hover {
            stroke-width: 14; /* Grossit au survol */
            filter: drop-shadow(0 0 5px rgba(250, 204, 21, 0.5));
            z-index: 10;
        }
        
        .tooltip {
            position: absolute;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            border: 1px solid #FACC15;
            z-index: 50;
        }
    </style>
</head>
<body class="text-white h-screen flex overflow-hidden">

    <!-- ========================
         SIDEBAR (Menu Gauche)
    ======================== -->
    <aside class="hidden md:flex w-24 lg:w-64 flex-col bg-dark-900 border-r border-white/5 h-full relative z-20">
        <!-- Logo -->
        <div class="h-24 flex items-center justify-center lg:justify-start lg:px-8 border-b border-white/5">
            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-gold-400 to-gold-600 flex items-center justify-center shadow-lg shadow-gold-500/20 shrink-0">
                <i class="fa-solid fa-wallet text-dark-900"></i>
            </div>
            <span class="ml-3 font-bold text-xl tracking-tight hidden lg:block text-white">Smart<span class="text-gold-400">Wallet</span></span>
        </div>

        <!-- Menu Links -->
        <nav class="flex-1 py-8 flex flex-col gap-2 px-4">
            <a href="#" class="flex items-center gap-4 px-4 py-3 rounded-xl bg-gold-500/10 text-gold-400 border border-gold-500/20 transition-all group">
                <i class="fa-solid fa-layer-group text-lg"></i>
                <span class="font-medium hidden lg:block">Dashboard</span>
            </a>
            <a href="#" class="flex items-center gap-4 px-4 py-3 rounded-xl text-slate-400 hover:text-white hover:bg-white/5 transition-all group">
                <i class="fa-solid fa-money-bill-transfer text-lg group-hover:text-gold-300"></i>
                <span class="font-medium hidden lg:block">Transactions</span>
            </a>
            <a href="#" class="flex items-center gap-4 px-4 py-3 rounded-xl text-slate-400 hover:text-white hover:bg-white/5 transition-all group">
                <i class="fa-solid fa-chart-pie text-lg group-hover:text-gold-300"></i>
                <span class="font-medium hidden lg:block">Analyses</span>
            </a>
            <a href="#" class="flex items-center gap-4 px-4 py-3 rounded-xl text-slate-400 hover:text-white hover:bg-white/5 transition-all group">
                <i class="fa-solid fa-credit-card text-lg group-hover:text-gold-300"></i>
                <span class="font-medium hidden lg:block">Cartes</span>
            </a>
        </nav>

        <!-- Profile Bottom -->
        <div class="p-4 border-t border-white/5">
            <a href="login.html" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-red-500/10 hover:text-red-400 text-slate-400 transition cursor-pointer">
                <i class="fa-solid fa-arrow-right-from-bracket"></i>
                <span class="font-medium hidden lg:block">Déconnexion</span>
            </a>
        </div>
    </aside>


    <!-- ========================
         MAIN CONTENT (Droite)
    ======================== -->
    <main class="flex-1 relative h-full overflow-y-auto overflow-x-hidden">
        
        <!-- HEADER MOBILE/TABLET -->
        <header class="sticky top-0 z-30 bg-dark-900/80 backdrop-blur-md border-b border-white/5 px-6 py-4 flex justify-between items-center">
            
            <!-- Welcome Text -->
            <div>
                <h1 class="text-2xl font-bold font-serif text-white">Bonjour, <span class="text-gold-gradient">Alexandre</span></h1>
                <p class="text-xs text-slate-400 font-mono mt-1" id="currentDate">CHARGEMENT DATE...</p>
            </div>

            <!-- Actions Droite -->
            <div class="flex items-center gap-4">
                <button class="w-10 h-10 rounded-full border border-white/10 flex items-center justify-center text-slate-400 hover:text-gold-400 hover:bg-white/5 transition relative">
                    <i class="fa-regular fa-bell"></i>
                    <span class="absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border border-dark-900"></span>
                </button>
                <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-slate-700 to-slate-600 border border-white/20 overflow-hidden cursor-pointer">
                    <img src="https://i.pravatar.cc/150?img=11" alt="Profile" class="w-full h-full object-cover opacity-90 hover:opacity-100 transition">
                </div>
            </div>
        </header>

        <!-- DASHBOARD CONTENT -->
        <div class="p-6 lg:p-10 max-w-7xl mx-auto space-y-8">

            <!-- 1. RESUME DU MOIS (Cartes) -->
            <section class="grid grid-cols-1 md:grid-cols-3 gap-6">
                
                <!-- CARD: Solde Global -->
                <div class="glass-card rounded-2xl p-6 relative overflow-hidden group animate-slide-up" style="animation-delay: 0.1s;">
                    <div class="absolute right-0 top-0 w-32 h-32 bg-gold-500/10 rounded-full blur-[40px] group-hover:bg-gold-500/20 transition duration-500"></div>
                    
                    <div class="flex items-center gap-3 mb-4">
                        <div class="p-2 rounded-lg bg-gold-400/20 text-gold-400 border border-gold-400/20">
                            <i class="fa-solid fa-wallet"></i>
                        </div>
                        <span class="text-sm text-slate-400 uppercase tracking-wider font-bold">Solde Global</span>
                    </div>

                    <div class="text-3xl lg:text-4xl font-mono font-bold text-white mb-2">
                        <span class="counter" data-target="124500">0</span> <span class="text-lg text-gold-400">DH</span>
                    </div>

                    <div class="flex items-center gap-2 text-xs font-medium text-emerald-400 bg-emerald-400/10 w-fit px-2 py-1 rounded-md">
                        <i class="fa-solid fa-arrow-trend-up"></i> +12.5% ce mois
                    </div>
                </div>

                <!-- CARD: Revenus -->
                <div class="glass-card rounded-2xl p-6 relative overflow-hidden group animate-slide-up" style="animation-delay: 0.2s;">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center gap-3">
                            <div class="p-2 rounded-lg bg-emerald-500/20 text-emerald-400 border border-emerald-500/20">
                                <i class="fa-solid fa-arrow-down"></i>
                            </div>
                            <span class="text-sm text-slate-400 uppercase tracking-wider font-bold">Revenus</span>
                        </div>
                        <!-- Mini Sparkline SVG -->
                        <svg class="w-20 h-10 stroke-emerald-500 fill-none" viewBox="0 0 100 50">
                            <path d="M0 40 Q 25 45, 50 20 T 100 10" stroke-width="3" />
                        </svg>
                    </div>
                    
                    <div class="text-2xl font-mono font-bold text-white mb-1">
                        + <span class="counter" data-target="45200">0</span> DH
                    </div>
                    <p class="text-xs text-slate-500">Total reçu ce mois-ci</p>
                </div>

                <!-- CARD: Dépenses -->
                <div class="glass-card rounded-2xl p-6 relative overflow-hidden group animate-slide-up" style="animation-delay: 0.3s;">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center gap-3">
                            <div class="p-2 rounded-lg bg-red-500/20 text-red-400 border border-red-500/20">
                                <i class="fa-solid fa-arrow-up"></i>
                            </div>
                            <span class="text-sm text-slate-400 uppercase tracking-wider font-bold">Dépenses</span>
                        </div>
                        <!-- Mini Sparkline SVG -->
                        <svg class="w-20 h-10 stroke-red-500 fill-none" viewBox="0 0 100 50">
                            <path d="M0 30 Q 25 10, 50 30 T 100 40" stroke-width="3" />
                        </svg>
                    </div>
                    
                    <div class="text-2xl font-mono font-bold text-white mb-1">
                        - <span class="counter" data-target="18340">0</span> DH
                    </div>
                    <p class="text-xs text-slate-500">Total dépensé ce mois-ci</p>
                </div>

            </section>


            <!-- 2. SECTION GRAPHIQUE & CATEGORIES -->
            <section class="grid grid-cols-1 lg:grid-cols-3 gap-8 animate-slide-up" style="animation-delay: 0.5s;">
                
                <!-- COLONNE GAUCHE : CHART (Pie) -->
                <div class="lg:col-span-1 glass-card rounded-3xl p-6 flex flex-col items-center justify-center relative min-h-[400px]">
                    <h3 class="text-lg font-bold text-white self-start mb-6">Répartition Dépenses</h3>
                    
                    <!-- SVG DONUT CHART -->
                    <div class="relative w-64 h-64">
                        <svg width="256" height="256" viewBox="0 0 100 100" class="transform -rotate-90">
                            <!-- Background Circle -->
                            <circle cx="50" cy="50" r="40" fill="transparent" stroke="#1e293b" stroke-width="12" />
                            
                            <!-- Segments (Remplis par JS) -->
                            <!-- Ex: Loyer (Gold) -->
                            <circle id="slice-1" cx="50" cy="50" r="40" fill="transparent" stroke="#FACC15" stroke-width="12" stroke-dasharray="0 251" class="chart-circle" />
                            <!-- Ex: Nourriture (Emerald) -->
                            <circle id="slice-2" cx="50" cy="50" r="40" fill="transparent" stroke="#10B981" stroke-width="12" stroke-dasharray="0 251" class="chart-circle" />
                            <!-- Ex: Loisirs (Blue) -->
                            <circle id="slice-3" cx="50" cy="50" r="40" fill="transparent" stroke="#3B82F6" stroke-width="12" stroke-dasharray="0 251" class="chart-circle" />
                            <!-- Ex: Transport (Purple) -->
                            <circle id="slice-4" cx="50" cy="50" r="40" fill="transparent" stroke="#8B5CF6" stroke-width="12" stroke-dasharray="0 251" class="chart-circle" />
                        </svg>

                        <!-- Centre du Donut -->
                        <div class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none">
                            <span class="text-xs text-slate-400 uppercase">Total</span>
                            <span class="text-xl font-mono font-bold text-white">18,340</span>
                            <span class="text-[10px] text-gold-400">DH</span>
                        </div>
                    </div>

                    <!-- Tooltip (caché par défaut) -->
                    <div id="tooltip" class="tooltip">Info</div>

                </div>

                <!-- COLONNE DROITE : LISTE CATEGORIES -->
                <div class="lg:col-span-2 glass-card rounded-3xl p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-white">Catégories Principales</h3>
                        <button class="text-xs text-gold-400 hover:text-white transition">Voir tout</button>
                    </div>

                    <!-- LISTE -->
                    <div class="space-y-4">
                        
                        <!-- ITEM 1 -->
                        <div class="flex items-center justify-between p-3 rounded-xl hover:bg-white/5 transition group cursor-pointer" onmouseover="highlightSlice(1)" onmouseout="resetSlices()">
                            <div class="flex items-center gap-4">
                                <div class="w-10 h-10 rounded-full bg-gold-500/20 flex items-center justify-center text-gold-400 border border-gold-500/20">
                                    <i class="fa-solid fa-house"></i>
                                </div>
                                <div>
                                    <div class="text-sm font-bold text-white">Logement</div>
                                    <div class="text-xs text-slate-400">Loyer, Factures</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="font-mono font-bold text-white">8,500 DH</div>
                                <div class="text-xs text-gold-400 font-bold">45%</div>
                            </div>
                            <!-- Bar de progression -->
                            <div class="absolute bottom-2 left-16 right-6 h-1 bg-slate-800 rounded-full overflow-hidden">
                                <div class="h-full bg-gold-400" style="width: 45%"></div>
                            </div>
                        </div>

                        <!-- ITEM 2 -->
                        <div class="flex items-center justify-between p-3 rounded-xl hover:bg-white/5 transition group cursor-pointer" onmouseover="highlightSlice(2)" onmouseout="resetSlices()">
                            <div class="flex items-center gap-4">
                                <div class="w-10 h-10 rounded-full bg-emerald-500/20 flex items-center justify-center text-emerald-400 border border-emerald-500/20">
                                    <i class="fa-solid fa-cart-shopping"></i>
                                </div>
                                <div>
                                    <div class="text-sm font-bold text-white">Alimentation</div>
                                    <div class="text-xs text-slate-400">Supermarché, Resto</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="font-mono font-bold text-white">4,200 DH</div>
                                <div class="text-xs text-emerald-400 font-bold">25%</div>
                            </div>
                        </div>

                        <!-- ITEM 3 -->
                        <div class="flex items-center justify-between p-3 rounded-xl hover:bg-white/5 transition group cursor-pointer" onmouseover="highlightSlice(3)" onmouseout="resetSlices()">
                            <div class="flex items-center gap-4">
                                <div class="w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-400 border border-blue-500/20">
                                    <i class="fa-solid fa-car"></i>
                                </div>
                                <div>
                                    <div class="text-sm font-bold text-white">Transport</div>
                                    <div class="text-xs text-slate-400">Essence, Uber</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="font-mono font-bold text-white">2,800 DH</div>
                                <div class="text-xs text-blue-400 font-bold">15%</div>
                            </div>
                        </div>

                        <!-- ITEM 4 -->
                        <div class="flex items-center justify-between p-3 rounded-xl hover:bg-white/5 transition group cursor-pointer" onmouseover="highlightSlice(4)" onmouseout="resetSlices()">
                            <div class="flex items-center gap-4">
                                <div class="w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-400 border border-purple-500/20">
                                    <i class="fa-solid fa-gamepad"></i>
                                </div>
                                <div>
                                    <div class="text-sm font-bold text-white">Loisirs</div>
                                    <div class="text-xs text-slate-400">Netflix, Sorties</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="font-mono font-bold text-white">2,840 DH</div>
                                <div class="text-xs text-purple-400 font-bold">15%</div>
                            </div>
                        </div>

                    </div>
                </div>

            </section>

        </div>
    </main>

    <!-- SCRIPTS NATIFS (ANIMATIONS & CHART LOGIC) -->
    <script>
        // 1. DATE DU JOUR
        const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString('fr-FR', dateOptions).toUpperCase();

        // 2. COMPTEURS ANIMÉS (ROLLING NUMBERS)
        const counters = document.querySelectorAll('.counter');
        const speed = 200; // Plus c'est bas, plus c'est rapide

        counters.forEach(counter => {
            const updateCount = () => {
                const target = +counter.getAttribute('data-target');
                const count = +counter.innerText.replace(/,/g, ''); // Enlever les virgules si existantes
                
                const inc = target / speed;

                if (count < target) {
                    // Formatter le nombre (ex: 12,450)
                    counter.innerText = Math.ceil(count + inc).toLocaleString('en-US');
                    setTimeout(updateCount, 15);
                } else {
                    counter.innerText = target.toLocaleString('en-US'); // Valeur finale propre
                }
            };
            updateCount();
        });

        // 3. LOGIQUE DU GRAPHIQUE SVG (DONUT)
        // Données (Pourraient venir d'une API)
        const data = [
            { id: 'slice-1', percent: 45, color: '#FACC15', label: 'Logement' },
            { id: 'slice-2', percent: 25, color: '#10B981', label: 'Alimentation' },
            { id: 'slice-3', percent: 15, color: '#3B82F6', label: 'Transport' },
            { id: 'slice-4', percent: 15, color: '#8B5CF6', label: 'Loisirs' }
        ];

        const radius = 40;
        const circumference = 2 * Math.PI * radius; // ~251.32

        let cumulativePercent = 0;

        data.forEach(item => {
            const slice = document.getElementById(item.id);
            
            // Calcul de la longueur de l'arc
            const strokeDasharray = `${(item.percent * circumference) / 100} ${circumference}`;
            
            // Rotation pour placer le segment au bon endroit (offset)
            const offset = (cumulativePercent * circumference) / 100;
            
            // Appliquer les styles initiaux
            slice.style.strokeDasharray = strokeDasharray;
            slice.style.strokeDashoffset = -offset; // Négatif pour tourner dans le sens horaire correct (avec transform rotate)
            
            // Interaction Tooltip
            slice.addEventListener('mousemove', (e) => {
                const tooltip = document.getElementById('tooltip');
                tooltip.style.left = e.pageX + 10 + 'px';
                tooltip.style.top = e.pageY + 10 + 'px';
                tooltip.style.opacity = 1;
                tooltip.innerHTML = `<strong>${item.label}</strong>: ${item.percent}%`;
            });
            
            slice.addEventListener('mouseleave', () => {
                document.getElementById('tooltip').style.opacity = 0;
            });

            cumulativePercent += item.percent;
        });

        // 4. INTERACTION LISTE -> CHART
        function highlightSlice(index) {
            // Réduire l'opacité de tous les autres
            for (let i = 1; i <= 4; i++) {
                const el = document.getElementById(`slice-${i}`);
                if (i === index) {
                    el.style.opacity = '1';
                    el.style.strokeWidth = '16'; // Grossir
                } else {
                    el.style.opacity = '0.3';
                    el.style.strokeWidth = '12';
                }
            }
        }

        function resetSlices() {
            for (let i = 1; i <= 4; i++) {
                const el = document.getElementById(`slice-${i}`);
                el.style.opacity = '1';
                el.style.strokeWidth = '12';
            }
        }
    </script>
</body>
</html>