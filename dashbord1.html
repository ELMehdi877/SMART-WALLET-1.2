<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinity Dashboard - Smart Wallet</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Plus Jakarta Sans', 'sans-serif'],
                        heading: ['Outfit', 'sans-serif'],
                    },
                    colors: {
                        gold: {
                            400: '#FACC15',
                            500: '#EAB308',
                            600: '#CA8A04',
                            glow: 'rgba(250, 204, 21, 0.15)'
                        },
                        dark: {
                            900: '#030303', // Almost Black
                            800: '#0A0A0A',
                            card: 'rgba(20, 20, 20, 0.6)'
                        }
                    },
                    animation: {
                        'float': 'float 8s ease-in-out infinite',
                        'pulse-slow': 'pulseSlow 6s infinite',
                        'entry': 'entry 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        pulseSlow: {
                            '0%, 100%': { opacity: '0.3' },
                            '50%': { opacity: '0.6' },
                        },
                        entry: {
                            '0%': { opacity: '0', transform: 'translateY(30px) scale(0.98)' },
                            '100%': { opacity: '1', transform: 'translateY(0) scale(1)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #030303;
            color: #fff;
            overflow-x: hidden;
        }

        /* FOND COSMIQUE */
        .bg-ambient {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: 
                radial-gradient(circle at 15% 15%, rgba(250, 204, 21, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 85% 85%, rgba(59, 130, 246, 0.05) 0%, transparent 40%);
            z-index: -1;
        }

        /* --- SPOTLIGHT CARD EFFECT --- */
        /* Les cartes ont un fond sombre, et un pseudo-élément 'after' servira de lumière suiveuse */
        .spotlight-card {
            background: rgba(20, 20, 20, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 24px;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(20px);
            transition: transform 0.3s ease, border-color 0.3s ease;
            /* Pour l'effet spotlight JS */
            --mouse-x: 0px;
            --mouse-y: 0px;
        }

        .spotlight-card::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 24px;
            padding: 1px; /* Épaisseur de la bordure lumineuse */
            background: radial-gradient(
                800px circle at var(--mouse-x) var(--mouse-y), 
                rgba(255, 255, 255, 0.3), 
                transparent 40%
            );
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .spotlight-card:hover::before {
            opacity: 1;
        }
        
        .spotlight-card:hover {
            transform: translateY(-4px);
            border-color: rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 40px -10px rgba(0,0,0,0.5);
        }

        /* --- TEXTE GOLD LUXE --- */
        .text-gold-fluid {
            background: linear-gradient(135deg, #FFF 0%, #FACC15 50%, #CA8A04 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* --- ANIMATION CANVAS --- */
        canvas {
            width: 100%;
            height: 100%;
        }

        /* --- SCROLLBAR --- */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
    </style>
</head>
<body class="flex h-screen selection:bg-gold-500 selection:text-black">

    <div class="bg-ambient"></div>

    <!-- SIDEBAR (Icon Only - Ultra Minimal) -->
    <aside class="hidden md:flex w-20 flex-col items-center py-8 border-r border-white/5 bg-black/40 backdrop-blur-xl z-50">
        <div class="w-10 h-10 rounded-xl bg-gold-500 flex items-center justify-center text-black shadow-[0_0_20px_rgba(234,179,8,0.4)] mb-10">
            <i class="fa-solid fa-infinity text-xl"></i>
        </div>
        
        <nav class="flex flex-col gap-6 w-full px-2">
            <a href="#" class="w-full aspect-square rounded-xl bg-white/10 text-gold-400 flex items-center justify-center border border-gold-500/20 transition group relative">
                <i class="fa-solid fa-grid-2 text-lg"></i>
                <span class="absolute left-14 bg-white text-black text-xs font-bold px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition pointer-events-none">Dashboard</span>
            </a>
            <a href="#" class="w-full aspect-square rounded-xl text-slate-500 hover:text-white hover:bg-white/5 flex items-center justify-center transition group relative">
                <i class="fa-solid fa-wallet text-lg"></i>
            </a>
            <a href="#" class="w-full aspect-square rounded-xl text-slate-500 hover:text-white hover:bg-white/5 flex items-center justify-center transition group relative">
                <i class="fa-solid fa-chart-pie text-lg"></i>
            </a>
            <a href="#" class="w-full aspect-square rounded-xl text-slate-500 hover:text-white hover:bg-white/5 flex items-center justify-center transition group relative">
                <i class="fa-solid fa-gear text-lg"></i>
            </a>
        </nav>

        <a href="login.html" class="mt-auto w-10 h-10 rounded-full overflow-hidden border border-white/20 hover:border-gold-500 transition">
            <img src="https://i.pravatar.cc/150?img=33" class="w-full h-full object-cover">
        </a>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="flex-1 overflow-y-auto overflow-x-hidden relative">
        
        <!-- TOP BAR (Flottante) -->
        <header class="sticky top-0 z-40 px-8 py-6 flex justify-between items-end bg-gradient-to-b from-dark-900 to-transparent pointer-events-none">
            <div class="pointer-events-auto">
                <p class="text-slate-400 text-xs font-mono uppercase tracking-widest mb-1">Vue d'ensemble</p>
                <h1 class="text-3xl font-heading font-light text-white">Bon retour, <span class="font-bold text-gold-fluid">Thomas</span></h1>
            </div>
            <div class="pointer-events-auto flex gap-4">
                <button class="w-10 h-10 rounded-full border border-white/10 bg-white/5 flex items-center justify-center text-white hover:bg-gold-500 hover:text-black hover:border-transparent transition duration-300">
                    <i class="fa-regular fa-bell"></i>
                </button>
            </div>
        </header>

        <!-- DASHBOARD GRID (Bento Layout) -->
        <div class="px-8 pb-12 max-w-[1600px] mx-auto">
            
            <!-- Grid Container -->
            <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 auto-rows-[minmax(180px,auto)]">
                
                <!-- 1. TOTAL BALANCE (Large Card) -->
                <div class="spotlight-card md:col-span-2 row-span-2 p-8 flex flex-col justify-between group animate-entry">
                    <div class="flex justify-between items-start z-10">
                        <div>
                            <p class="text-slate-400 font-medium mb-2">Solde Total</p>
                            <h2 class="text-5xl lg:text-6xl font-heading font-bold text-white tracking-tight">
                                <span class="counter" data-target="142590">0</span><span class="text-2xl text-slate-500 font-light">.00</span>
                            </h2>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-gold-500/20 border border-gold-500/30 flex items-center justify-center animate-pulse-slow">
                            <i class="fa-solid fa-arrow-trend-up text-gold-400"></i>
                        </div>
                    </div>

                    <!-- Canvas Chart Container (Liquid Wave) -->
                    <div class="absolute bottom-0 left-0 w-full h-48 opacity-40 mix-blend-screen pointer-events-none">
                        <canvas id="waveChart"></canvas>
                    </div>

                    <div class="relative z-10 flex gap-6 mt-8">
                        <div>
                            <div class="text-xs text-slate-500 uppercase tracking-wider mb-1">Revenus (Mensuel)</div>
                            <div class="flex items-center gap-2">
                                <span class="text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded text-xs">+12%</span>
                                <span class="font-mono text-xl text-white">45,200 DH</span>
                            </div>
                        </div>
                        <div class="w-px bg-white/10 h-10 self-center"></div>
                        <div>
                            <div class="text-xs text-slate-500 uppercase tracking-wider mb-1">Dépenses</div>
                            <div class="flex items-center gap-2">
                                <span class="text-red-400 bg-red-500/10 px-2 py-0.5 rounded text-xs">-5%</span>
                                <span class="font-mono text-xl text-white">12,840 DH</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. QUICK ACTIONS (Square) -->
                <div class="spotlight-card p-6 flex flex-col justify-center gap-4 animate-entry" style="animation-delay: 0.1s;">
                    <p class="text-slate-400 text-sm font-bold uppercase">Rapide</p>
                    <button class="w-full py-4 rounded-xl bg-white text-black font-bold hover:scale-[1.02] transition shadow-lg shadow-white/10 flex items-center justify-center gap-2">
                        <i class="fa-solid fa-paper-plane"></i> Envoyer
                    </button>
                    <button class="w-full py-4 rounded-xl bg-white/5 border border-white/10 text-white font-bold hover:bg-gold-500 hover:text-black hover:border-transparent transition flex items-center justify-center gap-2">
                        <i class="fa-solid fa-plus"></i> Ajouter
                    </button>
                </div>

                <!-- 3. MY CARDS (Visual) -->
                <div class="spotlight-card relative p-6 overflow-hidden animate-entry" style="animation-delay: 0.2s;">
                    <p class="text-slate-400 text-sm font-bold uppercase mb-4">Ma Carte</p>
                    <!-- Carte 3D CSS -->
                    <div class="w-full aspect-[1.58] bg-gradient-to-br from-gold-600 to-amber-800 rounded-xl p-4 shadow-2xl relative transform transition hover:scale-105 hover:-rotate-1 cursor-pointer">
                        <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20"></div>
                        <div class="flex justify-between items-start mb-6 relative z-10">
                            <i class="fa-brands fa-cc-mastercard text-2xl text-white/90"></i>
                            <i class="fa-solid fa-wifi rotate-90 text-white/50"></i>
                        </div>
                        <div class="font-mono text-white/90 text-sm tracking-widest mt-auto">**** 4291</div>
                    </div>
                </div>

                <!-- 4. ANALYTICS (Donut Chart JS Natif) -->
                <div class="spotlight-card md:col-span-2 p-6 animate-entry" style="animation-delay: 0.3s;">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="font-heading text-xl text-white">Répartition</h3>
                        <select class="bg-black/30 border border-white/10 text-xs text-white rounded-lg px-2 py-1 outline-none">
                            <option>Ce mois</option>
                            <option>Année</option>
                        </select>
                    </div>
                    
                    <div class="flex items-center gap-8">
                        <!-- Custom JS Donut -->
                        <div class="relative w-32 h-32 flex-shrink-0">
                            <canvas id="donutChart" width="128" height="128"></canvas>
                            <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                                <i class="fa-solid fa-wallet text-gold-400 text-xl"></i>
                            </div>
                        </div>

                        <!-- Legend -->
                        <div class="flex-1 grid grid-cols-2 gap-4">
                            <div>
                                <div class="flex items-center gap-2 mb-1">
                                    <span class="w-2 h-2 rounded-full bg-gold-400"></span>
                                    <span class="text-xs text-slate-400">Logement</span>
                                </div>
                                <div class="text-white font-mono font-bold">45%</div>
                            </div>
                            <div>
                                <div class="flex items-center gap-2 mb-1">
                                    <span class="w-2 h-2 rounded-full bg-blue-500"></span>
                                    <span class="text-xs text-slate-400">Shopping</span>
                                </div>
                                <div class="text-white font-mono font-bold">25%</div>
                            </div>
                            <div>
                                <div class="flex items-center gap-2 mb-1">
                                    <span class="w-2 h-2 rounded-full bg-purple-500"></span>
                                    <span class="text-xs text-slate-400">Loisirs</span>
                                </div>
                                <div class="text-white font-mono font-bold">20%</div>
                            </div>
                            <div>
                                <div class="flex items-center gap-2 mb-1">
                                    <span class="w-2 h-2 rounded-full bg-slate-600"></span>
                                    <span class="text-xs text-slate-400">Autres</span>
                                </div>
                                <div class="text-white font-mono font-bold">10%</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 5. RECENT TRANSACTIONS (List) -->
                <div class="spotlight-card md:col-span-2 p-6 animate-entry" style="animation-delay: 0.4s;">
                    <h3 class="font-heading text-xl text-white mb-6">Récemment</h3>
                    <div class="space-y-4">
                        <!-- Item -->
                        <div class="flex items-center justify-between group cursor-pointer">
                            <div class="flex items-center gap-4">
                                <div class="w-10 h-10 rounded-full bg-white/5 border border-white/5 flex items-center justify-center text-white group-hover:bg-gold-500 group-hover:text-black transition">
                                    <i class="fa-brands fa-apple text-lg"></i>
                                </div>
                                <div>
                                    <div class="text-white font-medium text-sm">Apple Store</div>
                                    <div class="text-xs text-slate-500">Aujourd'hui, 14:30</div>
                                </div>
                            </div>
                            <span class="text-white font-mono font-bold">- 2,400 DH</span>
                        </div>
                        <!-- Item -->
                        <div class="flex items-center justify-between group cursor-pointer">
                            <div class="flex items-center gap-4">
                                <div class="w-10 h-10 rounded-full bg-white/5 border border-white/5 flex items-center justify-center text-white group-hover:bg-emerald-500 group-hover:text-black transition">
                                    <i class="fa-solid fa-arrow-down text-lg"></i>
                                </div>
                                <div>
                                    <div class="text-white font-medium text-sm">Virement Reçu</div>
                                    <div class="text-xs text-slate-500">Hier, 09:15</div>
                                </div>
                            </div>
                            <span class="text-emerald-400 font-mono font-bold">+ 15,000 DH</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <!-- JS NATIF (ANIMATIONS PUISSANTES) -->
    <script>
        // 1. SPOTLIGHT EFFECT (La lumière qui suit la souris)
        const cards = document.querySelectorAll('.spotlight-card');
        
        document.addEventListener('mousemove', (e) => {
            cards.forEach(card => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Mettre à jour les variables CSS pour cette carte
                card.style.setProperty('--mouse-x', `${x}px`);
                card.style.setProperty('--mouse-y', `${y}px`);
            });
        });

        // 2. COMPTEUR (Rolling Numbers)
        const counters = document.querySelectorAll('.counter');
        counters.forEach(counter => {
            const target = +counter.getAttribute('data-target');
            const duration = 2000; // ms
            const stepTime = 20;
            const steps = duration / stepTime;
            const inc = target / steps;
            let current = 0;
            
            const timer = setInterval(() => {
                current += inc;
                if(current >= target) {
                    counter.innerText = target.toLocaleString('en-US');
                    clearInterval(timer);
                } else {
                    counter.innerText = Math.ceil(current).toLocaleString('en-US');
                }
            }, stepTime);
        });

        // 3. CANVAS WAVE CHART (L'animation "Waw")
        const waveCanvas = document.getElementById('waveChart');
        const ctx = waveCanvas.getContext('2d');
        
        // Ajuster la taille du canvas
        function resizeCanvas() {
            const parent = waveCanvas.parentElement;
            waveCanvas.width = parent.clientWidth;
            waveCanvas.height = parent.clientHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        let waveOffset = 0;
        
        function drawWave() {
            ctx.clearRect(0, 0, waveCanvas.width, waveCanvas.height);
            
            const width = waveCanvas.width;
            const height = waveCanvas.height;
            const centerY = height / 2 + 20; // Un peu plus bas
            
            // Créer un dégradé Or
            const gradient = ctx.createLinearGradient(0, 0, width, 0);
            gradient.addColorStop(0, "rgba(234, 179, 8, 0.1)");
            gradient.addColorStop(0.5, "rgba(234, 179, 8, 0.6)"); // Gold intense au milieu
            gradient.addColorStop(1, "rgba(234, 179, 8, 0.1)");

            ctx.beginPath();
            ctx.moveTo(0, height); // Coin bas gauche

            // Dessiner la courbe sinusoïdale
            for (let i = 0; i <= width; i++) {
                // Formule d'onde complexe pour un effet liquide
                const y = centerY + 
                          Math.sin((i * 0.01) + waveOffset) * 20 + 
                          Math.sin((i * 0.03) + (waveOffset * 2)) * 10;
                ctx.lineTo(i, y);
            }

            ctx.lineTo(width, height); // Coin bas droite
            ctx.closePath();
            
            ctx.fillStyle = gradient;
            ctx.fill();
            
            // Ligne supérieure brillante
            ctx.lineWidth = 2;
            ctx.strokeStyle = "rgba(250, 204, 21, 0.8)";
            ctx.stroke();

            waveOffset += 0.05; // Vitesse de l'animation
            requestAnimationFrame(drawWave);
        }
        drawWave(); // Lancer l'animation

        // 4. CANVAS DONUT CHART (Minimaliste & Propre)
        const donutCanvas = document.getElementById('donutChart');
        const dCtx = donutCanvas.getContext('2d');
        const centerX = donutCanvas.width / 2;
        const centerY = donutCanvas.height / 2;
        const radius = 50;
        const lineWidth = 12;

        const data = [
            { color: '#FACC15', value: 0.45 }, // Gold
            { color: '#3B82F6', value: 0.25 }, // Blue
            { color: '#A855F7', value: 0.20 }, // Purple
            { color: '#475569', value: 0.10 }  // Slate
        ];

        let startAngle = -Math.PI / 2; // Commencer en haut

        data.forEach(slice => {
            const sliceAngle = slice.value * 2 * Math.PI;
            
            dCtx.beginPath();
            dCtx.arc(centerX, centerY, radius, startAngle, startAngle + sliceAngle);
            dCtx.strokeStyle = slice.color;
            dCtx.lineWidth = lineWidth;
            dCtx.lineCap = 'round'; // Bords arrondis pour le style premium
            dCtx.stroke();
            
            // Espace entre les segments
            startAngle += sliceAngle;
        });

    </script>
</body>
</html>